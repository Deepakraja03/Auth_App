{"ast":null,"code":"import _regeneratorRuntime from\"E:/Auth_App/auth-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/Auth_App/auth-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{GoogleAuthProvider,getAuth,signInWithPopup}from'firebase/auth';import app from'../firebase';import{useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';import{signInSuccess}from'../redux/user/userSlice';import{jsx as _jsx}from\"react/jsx-runtime\";export default function OAuth(){var dispatch=useDispatch();var navigate=useNavigate();var baseUrl='http://localhost:3000';var handleGoogleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var provider,auth,result,res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;provider=new GoogleAuthProvider();auth=getAuth(app);_context.next=5;return signInWithPopup(auth,provider);case 5:result=_context.sent;_context.next=8;return fetch(\"\".concat(baseUrl,\"/auth/google\"),{method:'POST',crossDomain:true,headers:{'Content-Type':'application/json',Accept:'application/json','Access-Control-Allow-Origin':'*'},body:JSON.stringify({name:result.user.displayName,email:result.user.email,photo:result.user.photoURL})});case 8:res=_context.sent;_context.next=11;return res.json();case 11:data=_context.sent;dispatch(signInSuccess(data));navigate('/');_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.log(\"Could not login with Google\",_context.t0);case 19:case\"end\":return _context.stop();}},_callee,null,[[0,16]]);}));return function handleGoogleClick(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleGoogleClick,className:\"bg-red-700 text-white rounded-lg p-3 uppercase hover:opacity-95\",children:\"Continue with Google\"});}","map":{"version":3,"names":["React","GoogleAuthProvider","getAuth","signInWithPopup","app","useDispatch","useNavigate","signInSuccess","jsx","_jsx","OAuth","dispatch","navigate","baseUrl","handleGoogleClick","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","provider","auth","result","res","data","wrap","_callee$","_context","prev","next","sent","fetch","concat","method","crossDomain","headers","Accept","body","JSON","stringify","name","user","displayName","email","photo","photoURL","json","t0","console","log","stop","apply","arguments","type","onClick","className","children"],"sources":["E:/Auth_App/auth-app/src/components/OAuth.js"],"sourcesContent":["import React from 'react';\r\nimport {GoogleAuthProvider, getAuth, signInWithPopup} from 'firebase/auth';\r\nimport app  from '../firebase';\r\nimport { useDispatch } from 'react-redux';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport { signInSuccess } from '../redux/user/userSlice';\r\n\r\nexport default function OAuth() {\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n    const baseUrl = 'http://localhost:3000';\r\n    const handleGoogleClick = async () => {\r\n        try {\r\n            const provider = new GoogleAuthProvider();\r\n            const auth = getAuth(app);\r\n            const result = await signInWithPopup(auth, provider);\r\n            const res = await fetch(`${baseUrl}/auth/google`, {\r\n                method: 'POST',\r\n                crossDomain: true,\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  Accept: 'application/json',\r\n                  'Access-Control-Allow-Origin': '*',\r\n                },\r\n                body: JSON.stringify({\r\n                    name: result.user.displayName,\r\n                    email: result.user.email,\r\n                    photo: result.user.photoURL,\r\n                }),\r\n            })\r\n            const data = await res.json();\r\n            dispatch(signInSuccess(data));\r\n            navigate('/');\r\n        } catch (error) {\r\n            console.log(\"Could not login with Google\", error);\r\n        }\r\n    }\r\n  return (\r\n    <button type='button' \r\n        onClick={handleGoogleClick} \r\n        className='bg-red-700 text-white rounded-lg p-3 uppercase hover:opacity-95'>\r\n            Continue with Google\r\n    </button>\r\n  )\r\n}\r\n"],"mappings":"oOAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAAQC,kBAAkB,CAAEC,OAAO,CAAEC,eAAe,KAAO,eAAe,CAC1E,MAAO,CAAAC,GAAG,KAAO,aAAa,CAC9B,OAASC,WAAW,KAAQ,aAAa,CACzC,OAAQC,WAAW,KAAO,kBAAkB,CAC5C,OAASC,aAAa,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExD,cAAe,SAAS,CAAAC,KAAKA,CAAA,CAAG,CAC5B,GAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAO,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAO,OAAO,CAAG,uBAAuB,CACvC,GAAM,CAAAC,iBAAiB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,CAAAC,MAAA,CAAAC,GAAA,CAAAC,IAAA,QAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAEZR,QAAQ,CAAG,GAAI,CAAAnB,kBAAkB,CAAC,CAAC,CACnCoB,IAAI,CAAGnB,OAAO,CAACE,GAAG,CAAC,CAAAuB,QAAA,CAAAE,IAAA,SACJ,CAAA1B,eAAe,CAACkB,IAAI,CAAED,QAAQ,CAAC,QAA9CE,MAAM,CAAAK,QAAA,CAAAG,IAAA,CAAAH,QAAA,CAAAE,IAAA,SACM,CAAAE,KAAK,IAAAC,MAAA,CAAInB,OAAO,iBAAgB,CAC9CoB,MAAM,CAAE,MAAM,CACdC,WAAW,CAAE,IAAI,CACjBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,MAAM,CAAE,kBAAkB,CAC1B,6BAA6B,CAAE,GACjC,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,IAAI,CAAElB,MAAM,CAACmB,IAAI,CAACC,WAAW,CAC7BC,KAAK,CAAErB,MAAM,CAACmB,IAAI,CAACE,KAAK,CACxBC,KAAK,CAAEtB,MAAM,CAACmB,IAAI,CAACI,QACvB,CAAC,CACL,CAAC,CAAC,QAbItB,GAAG,CAAAI,QAAA,CAAAG,IAAA,CAAAH,QAAA,CAAAE,IAAA,UAcU,CAAAN,GAAG,CAACuB,IAAI,CAAC,CAAC,SAAvBtB,IAAI,CAAAG,QAAA,CAAAG,IAAA,CACVnB,QAAQ,CAACJ,aAAa,CAACiB,IAAI,CAAC,CAAC,CAC7BZ,QAAQ,CAAC,GAAG,CAAC,CAACe,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAoB,EAAA,CAAApB,QAAA,aAEdqB,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAAtB,QAAA,CAAAoB,EAAO,CAAC,CAAC,yBAAApB,QAAA,CAAAuB,IAAA,MAAA/B,OAAA,iBAEzD,kBAzBK,CAAAL,iBAAiBA,CAAA,SAAAC,IAAA,CAAAoC,KAAA,MAAAC,SAAA,OAyBtB,CACH,mBACE3C,IAAA,WAAQ4C,IAAI,CAAC,QAAQ,CACjBC,OAAO,CAAExC,iBAAkB,CAC3ByC,SAAS,CAAC,iEAAiE,CAAAC,QAAA,CAAC,sBAEhF,CAAQ,CAAC,CAEb"},"metadata":{},"sourceType":"module","externalDependencies":[]}